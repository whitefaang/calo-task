var L=Object.defineProperty,R=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var b=(o,t,e)=>t in o?L(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,h=(o,t)=>{for(var e in t||(t={}))C.call(t,e)&&b(o,e,t[e]);if(w)for(var e of w(t))D.call(t,e)&&b(o,e,t[e]);return o},x=(o,t)=>R(o,S(t));import{j as v,R as N,r as d,n as y,a as k,c as M}from"./vendor.d6e7d39d.js";const J=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}};J();const n=v.exports.jsx,c=v.exports.jsxs;function I(){return c("div",{className:"p-4 flex items-center gap-3 md:gap-5 justify-between md:justify-center",children:[n("span",{className:"hidden md:block border-t w-1/6"}),n("span",{className:"text-4xl font-title ",children:" CALO"}),n("span",{className:"hidden md:block border-t w-1/6"}),c("div",{className:"flex gap-4 text-sm md:hidden font-bold",children:[n("a",{href:"#jobImages",children:"Images"}),n("a",{href:"#jobList",children:"Jobs"})]})]})}const j=N.createContext(null);function T({children:o}){const[t,e]=d.exports.useState([]),l=d.exports.useCallback(s=>{const i=y();return e(m=>(setTimeout(()=>{r(i)},5e3),[{id:i,message:s,level:"danger"},...m.length===5?m.slice(-1):m])),i},[]),r=s=>{e(i=>i.filter(m=>m.id!==s))};return c(j.Provider,{value:{show:l,remove:r},children:[k.createPortal(n("div",{className:"fixed w-screen top-10 flex flex-col gap-3 items-center",children:t.map(s=>c("div",{className:"text-danger flex items-center bg-color rounded-lg shadow-gray shadow-2xl p-3 font-bold text-sm",children:[n("span",{children:n("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),n("span",{className:"ml-2",children:s.message})]},s.id))}),document.getElementById("notifications")),o]})}const A=o=>{const t=o/1e3,e=Math.floor(t/(60*60)),l=t%(60*60),r=Math.floor(l/60),s=l%60,i=Math.ceil(s);return`${e}:${r}:${i}`};function E({until:o}){const t=d.exports.useRef(o-Date.now()),[e,l]=d.exports.useState({time:t.current,percent:0});d.exports.useEffect(()=>{const s=setInterval(()=>{l(i=>{if(i.time<=1e3)return clearInterval(s),{time:0,percent:100};const m=i.time-1e3;return{time:m,percent:parseFloat((100-m*100/t.current).toFixed(2))}})},1e3)},[]);const r=d.exports.useMemo(()=>A(e.time),[e.time]);return{percent:e.percent,timer:r}}function P({name:o,resolvedAt:t,_estimatedResolutionAt:e}){const l=E({until:e.getTime()}),r=d.exports.useMemo(()=>l.timer==="0:0:0"?`Completed on ${t==null?void 0:t.toLocaleDateString()}, ${t==null?void 0:t.toLocaleTimeString()}`:l.timer,[l.timer]);return c("div",{className:"p-5 border mb-3 rounded-lg relative overflow-hidden",title:o,children:[n("div",{className:"absolute h-full bg-color top-0 left-0 bg-opacity-20",style:{width:`${l.percent}%`}}),n("p",{className:"text-3xl font-title truncate",children:o}),c("div",{className:"flex flex-col md:flex-row justify-between",children:[c("span",{className:"font-bold",children:[l.percent,"%"]}),n("span",{className:"font-bold",children:r})]})]})}function _(o){const t=d.exports.useRef(sessionStorage),e=d.exports.useContext(j);return{set:s=>{try{t.current.setItem(o,JSON.stringify(s))}catch(i){console.error(i),e==null||e.show("Persist memory exceeded! Some items may not be saved")}},get:()=>{const s=t.current.getItem(o);return s?JSON.parse(s):[]}}}const O=()=>Math.ceil(Math.floor(Math.random()*10*1e3)/5)*5%300*1e3,B=()=>fetch("https://source.unsplash.com/1920x1080/?food").then(o=>o.blob()).then(o=>$(o)),$=o=>new Promise((t,e)=>{const l=new FileReader;l.onloadend=()=>t(l.result),l.readAsDataURL(o)}),F=o=>new Promise(t=>setTimeout(()=>{t()},o));function W(){const[o,t]=d.exports.useState([]),[e,l]=d.exports.useState(""),r=_("jobs"),s=d.exports.useCallback(async a=>{const u=await B();await F(a._estimatedResolutionAt.getTime()-Date.now()||0),t(f=>{const g=f.map(p=>p.id===a.id?x(h({},p),{resolvedAt:new Date,result:u}):p);return r.set(g),g})},[]),i=a=>{t(u=>{const f=[a,...u];return r.set(f),f}),a.result==="pending"&&s(a)},m=a=>{a==null||a.preventDefault();const u=y(),f=O();l(""),i({id:u,name:e||"Unknown",createdAt:new Date,resolvedAt:null,result:"pending",_estimatedResolutionAt:new Date(Date.now()+f)})};return d.exports.useEffect(()=>{r.get().map(a=>{const u=new Date(a._estimatedResolutionAt);i(x(h({},a),{createdAt:new Date(a.createdAt),resolvedAt:a.resolvedAt?new Date(a.resolvedAt):a.resolvedAt,_estimatedResolutionAt:u}))})},[]),{add:m,jobs:o,form:{name:e,set:l}}}function q(){const o=W(),t=d.exports.useRef(null);return d.exports.useEffect(()=>{var e;(e=t.current)==null||e.focus()},[]),c("div",{className:"container px-3 mx-auto flex flex-wrap h-full py-7",children:[c("div",{id:"jobImages",className:"flex-1 md:pr-5 h-full flex flex-col",children:[n("div",{className:"flex",children:n("form",{className:"flex-1",onSubmit:o.add,children:c("div",{className:"flex items-center border-2 border-color focus-within:outline rounded-lg overflow-hidden",children:[n("input",{type:"text",required:!0,className:"flex-1 p-3 w-full text-3xl font-title bg-primary focus:outline-none placeholder:text-color placeholder:text-opacity-80",placeholder:"Enter Job Name..",ref:t,onChange:e=>o.form.set(e.target.value),value:o.form.name}),n("div",{className:" mx-3 cursor-pointer",title:o.form.name?"Press Enter":"Add Task",children:o.form.name?n("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transform duration-100 rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:o.add,children:n("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}):n("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transform duration-100 rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:()=>{var e;return(e=t.current)==null?void 0:e.focus()},children:n("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})})}),c("div",{className:"flex-1 relative",children:[n("div",{className:"absolute w-full h-full py-5",children:n("div",{className:"h-full px-3 md:pl-0 md:pr-5 overflow-y-auto",children:n("div",{className:"grid md:grid-cols-3 gap-4",children:o.jobs.map(e=>c("div",{children:[n("div",{className:"border-2 shadow-md rounded-lg overflow-hidden",children:e.result==="pending"?n("div",{className:"bg-gray animate-pulse h-full min-h-[180px]"}):n("img",{src:e.result,alt:e.name})}),n("p",{className:"font-bold my-2 text-center md:text-left",children:e.name})]},e.id))})})}),o.jobs.length===0&&n("div",{className:"w-10/12 md:w-1/2 mx-auto h-full flex items-center",children:c("div",{className:"text-center",children:[n("img",{src:"empty.svg",alt:""}),n("p",{className:"font-bold text-xl my-5",children:"No Jobs available"})]})})]})]}),c("div",{id:"jobList",className:M("w-full md:w-1/3 md:pl-5 h-full flex flex-col",{"w-0 hidden":o.jobs.length===0}),children:[c("div",{className:"p-5 md:p-4 text-3xl md:text-xl md:text-right font-bold",children:["All Jobs (",o.jobs.length,")"]}),n("div",{className:"flex-1 relative",children:n("div",{className:"absolute p-3 h-full w-full overflow-y-auto",children:o.jobs.map(e=>n(P,h({},e),e.id))})})]})]})}function U(){return n(T,{children:c("main",{className:"h-full flex flex-col",children:[n(I,{}),n("div",{className:"flex-1 overflow-y-auto",children:n(q,{})})]})})}k.render(n(N.StrictMode,{children:n(U,{})}),document.getElementById("root"));
